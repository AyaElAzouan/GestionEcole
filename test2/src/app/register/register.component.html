<div class="register-container">
    <div class="glass-card">
      <div *ngIf="alertMessage" class="alert alert-{{ alertType }} alert-dismissible fade show" role="alert">
        {{ alertMessage }}
        <button type="button" class="btn-close" (click)="alertMessage = null" aria-label="Close"></button>
      </div>
      <h2>S'inscrire</h2>
      
      <!-- Role Selection Step -->
      <div *ngIf="!selectedRole" class="role-selection">
        <div class="role-buttons">
          <button (click)="selectRole('admin')" class="role-btn">
            <i class="fas fa-user-shield"></i>
            Admin
          </button>
          <button (click)="selectRole('secretaire')" class="role-btn">
            <i class="fas fa-user-tie"></i>
            Secretaire
          </button>
          <button (click)="selectRole('prof')" class="role-btn">
            <i class="fas fa-chalkboard-teacher"></i>
            Prof
          </button>
        </div>
      </div>

      <!-- Registration Forms -->
      <div *ngIf="selectedRole">
        <h3>S'inscrire en tant que {{ selectedRole }}</h3>
        <button class="back-btn" (click)="selectedRole = null">
          <i class="fas fa-arrow-left"></i> Retour à la sélection des rôles
        </button>
        
        <!-- Admin Form -->
        <form *ngIf="selectedRole === 'admin'" [formGroup]="adminForm" (ngSubmit)="onSubmit()">
         
          <div class="form-group">
            <label for="email">Email:</label>
            <input id="email" type="email" formControlName="email"
                   [class.error]="isFieldInvalid(adminForm, 'email')">
            <div class="error-message" *ngIf="isFieldInvalid(adminForm, 'email')">
              Valid email is required
            </div>
          </div>

          <div class="form-group">
            <label for="password">Password:</label>
            <input id="password" type="password" formControlName="password"
                   [class.error]="isFieldInvalid(adminForm, 'password')">
            <div class="error-message" *ngIf="isFieldInvalid(adminForm, 'password')">
              Password must be at least 6 characters
            </div>
          </div>

        

          <button type="submit" [disabled]="adminForm.invalid">S'inscrire</button>
        </form>

        <!-- Secretaire Form -->
        <form *ngIf="selectedRole === 'secretaire'" [formGroup]="secretaireForm" (ngSubmit)="onSubmit()">
         
          <div class="form-group">
            <label for="email">Email:</label>
            <input id="email" type="email" formControlName="email"
                   [class.error]="isFieldInvalid(secretaireForm, 'email')">
            <div class="error-message" *ngIf="isFieldInvalid(secretaireForm, 'email')">
              Valid email is required
            </div>
          </div>

          <div class="form-group">
            <label for="password">Password:</label>
            <input id="password" type="password" formControlName="password"
                   [class.error]="isFieldInvalid(secretaireForm, 'password')">
            <div class="error-message" *ngIf="isFieldInvalid(secretaireForm, 'password')">
              Password must be at least 6 characters
            </div>
          </div>

          

          <button type="submit" [disabled]="secretaireForm.invalid">S'inscrire</button>
        </form>

        <!-- Prof Form -->
        <form *ngIf="selectedRole === 'prof'" [formGroup]="profForm" (ngSubmit)="onSubmit()">
          <div class="form-group">
            <label for="cin">CIN:</label>
            <input id="cin" type="text" formControlName="cin" [class.error]="isFieldInvalid(profForm, 'cin')">
            <div class="error-message" *ngIf="isFieldInvalid(profForm, 'cin')">
              CIN est requis
            </div>
          </div>
        
          <div class="form-group">
            <label for="code">Code:</label>
            <input id="code" type="text" formControlName="code" [class.error]="isFieldInvalid(profForm, 'code')">
            <div class="error-message" *ngIf="isFieldInvalid(profForm, 'code')">
              Code est requis
            </div>
          </div>
        
          <div class="form-group">
            <label for="nom">Nom:</label>
            <input id="nom" type="text" formControlName="nom" [class.error]="isFieldInvalid(profForm, 'nom')">
            <div class="error-message" *ngIf="isFieldInvalid(profForm, 'nom')">
              Nom est requis
            </div>
          </div>
        
          <div class="form-group">
            <label for="prenom">Prénom:</label>
            <input id="prenom" type="text" formControlName="prenom" [class.error]="isFieldInvalid(profForm, 'prenom')">
            <div class="error-message" *ngIf="isFieldInvalid(profForm, 'prenom')">
              Prénom est requis
            </div>
          </div>
        
          <div class="form-group">
            <label for="adresse">Adresse:</label>
            <input id="adresse" type="text" formControlName="adresse" [class.error]="isFieldInvalid(profForm, 'adresse')">
            <div class="error-message" *ngIf="isFieldInvalid(profForm, 'adresse')">
              Adresse est requise
            </div>
          </div>
        
          <div class="form-group">
            <label for="numTele">Numéro de téléphone:</label>
            <input id="numTele" type="text" formControlName="numTele" [class.error]="isFieldInvalid(profForm, 'numTele')">
            <div class="error-message" *ngIf="isFieldInvalid(profForm, 'numTele')">
              Numéro de téléphone est requis
            </div>
          </div>
        
          <div class="form-group">
            <label for="email">Email:</label>
            <input id="email" type="email" formControlName="email" [class.error]="isFieldInvalid(profForm, 'email')">
            <div class="error-message" *ngIf="isFieldInvalid(profForm, 'email')">
              Email valide est requis
            </div>
          </div>
        
          <div class="form-group">
            <label for="password">Mot de passe:</label>
            <input id="password" type="password" formControlName="password" [class.error]="isFieldInvalid(profForm, 'password')">
            <div class="error-message" *ngIf="isFieldInvalid(profForm, 'password')">
              Mot de passe doit contenir au moins 6 caractères
            </div>
          </div>
        
          <button type="submit" [disabled]="profForm.invalid">S'inscrire</button>
        </form>
        
      </div>
    </div>
  </div>